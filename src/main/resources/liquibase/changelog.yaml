databaseChangeLog:

    -   changeSet:
            id: DEV-1
            author: Aleksey Zhdanov
            changes:
                -   createTable:
                        tableName: clients
                        remarks: Клиенты
                        columns:
                            -   column:
                                    name: id
                                    type: integer
                                    remarks: Идентификатор
                                    autoIncrement: true
                                    constraints:
                                        nullable: false
                                        primaryKey: true
                                        primaryKeyName: clients_pk
                            -   column:
                                    name: lastname
                                    type: varchar(50)
                                    remarks: Фамилия
                                    constraints:
                                        nullable: false
                            -   column:
                                    name: firstname
                                    type: varchar(50)
                                    remarks: Имя
                                    constraints:
                                        nullable: false
                            -   column:
                                    name: middlename
                                    type: varchar(50)
                                    remarks: Отчество
                            -   column:
                                    name: age
                                    type: integer
                                    remarks: Возраст
                                    constraints:
                                        nullable: false
                -   insert:
                        tableName: clients
                        columns:
                            -   column:
                                    name: lastname
                                    value: Иванов
                            -   column:
                                    name: firstname
                                    value: Иван
                            -   column:
                                    name: middlename
                                    value: Иванович
                            -   column:
                                    name: age
                                    value: 33

    -   changeSet:
            id: DEV-2
            author: Aleksey Zhdanov
            changes:
                -   createTable:
                        tableName: accounts
                        remarks: Счета
                        columns:
                            -   column:
                                    name: id
                                    type: integer
                                    autoIncrement: true
                                    constraints:
                                        nullable: false
                                        primaryKey: true
                                        primaryKeyName: accounts_pk
                            -   column:
                                    name: number
                                    type: varchar(50)
                                    remarks: Номер счёта
                            -   column:
                                    name: opening_date
                                    type: date
                                    remarks: Дата открытия счёта
                                    defaultValue: now()
                                    constraints:
                                        nullable: false
                            -   column:
                                    name: balance
                                    type: numeric
                -   addColumn:
                        tableName: accounts
                        columns:
                            -   column:
                                    name: client_id
                                    type: integer
                -   addForeignKeyConstraint:
                        baseTableName: accounts
                        baseColumnNames: client_id
                        referencedTableName: clients
                        referencedColumnNames: id
                        constraintName: accounts_clients_fk
                -   insert:
                        tableName: accounts
                        columns:
                            -   column:
                                    name: number
                                    value: 11111222223333344444
                            -   column:
                                    name: opening_date
                                    value: 2017-01-14
                            -   column:
                                    name: balance
                                    value: 100
                            -   column:
                                    name: client_id
                                    valueComputed: (SELECT id FROM clients WHERE lastname = 'Иванов')
                -   insert:
                        tableName: accounts
                        columns:
                            -   column:
                                    name: number
                                    value: 55555666667777788888
                            -   column:
                                    name: opening_date
                                    value: 2018-02-15
                            -   column:
                                    name: balance
                                    value: 500
                            -   column:
                                    name: client_id
                                    valueComputed: (SELECT id FROM clients WHERE lastname = 'Иванов')

    -   changeSet:
            id: DEV-3
            author: Aleksey Zhdanov
            changes:
                -   createTable:
                        tableName: cards
                        remarks: Карты
                        columns:
                            -   column:
                                    name: id
                                    type: integer
                                    autoIncrement: true
                                    constraints:
                                        nullable: false
                                        primaryKey: true
                                        primaryKeyName: cards_pk
                            -   column:
                                    name: card_number
                                    type: varchar(50)
                                    remarks: Номер карты
                            -   column:
                                    name: release_date
                                    type: date
                                    remarks: Дата выпуска карты
                                    defaultValue: now()
                                    constraints:
                                        nullable: false
                -   addColumn:
                        tableName: cards
                        columns:
                            -   column:
                                    name: account_id
                                    type: integer
                -   addForeignKeyConstraint:
                        baseTableName: cards
                        baseColumnNames: account_id
                        referencedTableName: accounts
                        referencedColumnNames: id
                        constraintName: cards_accounts_fk
                -   insert:
                        tableName: cards
                        columns:
                            -   column:
                                    name: card_number
                                    value: 2020201111122222
                            -   column:
                                    name: release_date
                                    value: 2019-09-15
                            -   column:
                                    name: account_id
                                    valueComputed: (SELECT id FROM accounts WHERE accounts.number = '11111222223333344444')
                -   insert:
                        tableName: cards
                        columns:
                            -   column:
                                    name: card_number
                                    value: 2020203333344444
                            -   column:
                                    name: release_date
                                    value: 2019-10-16
                            -   column:
                                    name: account_id
                                    valueComputed: (SELECT id FROM accounts WHERE accounts.number = '11111222223333344444')
                -   insert:
                        tableName: cards
                        columns:
                            -   column:
                                    name: card_number
                                    value: 2020205555566666
                            -   column:
                                    name: release_date
                                    value: 2020-11-17
                            -   column:
                                    name: account_id
                                    valueComputed: (SELECT id FROM accounts WHERE accounts.number = '55555666667777788888')
                -   insert:
                        tableName: cards
                        columns:
                            -   column:
                                    name: card_number
                                    value: 2020207777788888
                            -   column:
                                    name: release_date
                                    value: 2020-12-18
                            -   column:
                                    name: account_id
                                    valueComputed: (SELECT id FROM accounts WHERE accounts.number = '55555666667777788888')
